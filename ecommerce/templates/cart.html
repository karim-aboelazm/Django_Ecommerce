{% extends 'base.html' %}
{% load static i18n %}
{% block title %}{% trans "Cart" %}{% endblock title %}
{% block content %}
<div class="container mt-5 mb-5">
    <div class="row mx-auto" style="margin-top: 150px;">
        <div class="col-md-10 mx-auto">
            <h2 class="text-center mt-4 mb-5">{% trans "Items In Your Cart" %} </h2>
            <table class="table text.center table-dark table-hover p-5">
                <thead>
                    <tr>
                        <th scope="col">{% trans "SN" %}</th>
                        <th scope="col">{% trans "Product Name" %}</th>
                        <th scope="col">{% trans "Product Price" %}</th>
                        <th scope="col">{% trans "Quantity" %}</th>
                        <th scope="col">{% trans "Total Price" %}</th>
                        <th collapse="2">{% trans "Actions" %}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in cart.cartproduct_set.all %}
                    <tr>
                        <th>{{ forloop.counter }}</th>
                        <td>{{ item.product.title }}</td>
                        <td>$ {{ item.product.price_after_discount }}</td>
                        <td>{{ item.quantity }}</td>
                        <td>{{ item.subtotal }}</td>
                        <td collapse="2">
                            <div class="actions" style="display:flex;">
                                <a href="{% url 'ecommerce:manage_cart' item.id %}?action=inc" class="col btn btn-primary">+</a>
                                <a href="{% url 'ecommerce:manage_cart' item.id %}?action=dcr" class="col btn btn-warning">-</a>
                                <a href="{% url 'ecommerce:manage_cart' item.id %}?action=rmv" class="col btn btn-danger">x</a>
                        
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                    <tr class="mt-3">
                        {% get_current_language as LANGUAGE_CODE %}
                         {% if LANGUAGE_CODE == 'ar' %}
                        <th collapse="4" class="text-right pt-3"> : السعر النهائي </th>
                        <th class="pt-3"> {{cart.total}} $</th>
                        {% else %}
                        <th collapse="4" class="text-right pt-3">Total : </th>
                        <th class="pt-3"> $ {{cart.total}}</th>
                        {% endif %}
                    </tr>
                    {% if cart.cartproduct_set.all %}
                    <th class="align-right">
                        <td class="align-right" style="right:0">
                            <a href="{% url 'ecommerce:empty_cart' %}" class="btn btn-danger text-right">{% trans "Empty cart" %} <i class="material-icons" style="position:relative;top:7px">delete</i></a>
                        </td>
                        <td class="align-right" style="right:0">
                            <a href="{% url 'ecommerce:checkout' %}" class="btn btn-warning text-right">{% trans "Checkout" %} <i class="material-icons" style="position:relative;top:7px">payment</i></a>
                        </td>
                    </th>
                    {% endif %}
                    
                </tbody>
            </table>
        </div>
        <div class="col-md-4">

        </div>
    </div>
</div>
{% endblock content %}